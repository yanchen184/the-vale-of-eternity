<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Lightning Effect Test</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      background: linear-gradient(135deg, #1e293b, #312e81, #1e293b);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      color: white;
    }

    h1 {
      margin-bottom: 2rem;
      color: #fbbf24;
    }

    .test-button {
      padding: 1rem 2rem;
      font-size: 1.25rem;
      font-weight: bold;
      background: linear-gradient(135deg, #f97316, #dc2626);
      border: none;
      border-radius: 0.5rem;
      color: white;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .test-button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 30px rgba(249, 115, 22, 0.5);
    }

    .info {
      margin-top: 2rem;
      padding: 1rem;
      background: rgba(0,0,0,0.3);
      border-radius: 0.5rem;
      max-width: 400px;
      text-align: center;
    }

    /* ============================================
     * LIGHTNING EFFECT STYLES (copied from component)
     * ============================================ */

    @keyframes screen-shake {
      0%, 100% { transform: translate(0, 0); }
      10% { transform: translate(-8px, 4px); }
      20% { transform: translate(8px, -4px); }
      30% { transform: translate(-6px, 2px); }
      40% { transform: translate(6px, -2px); }
      50% { transform: translate(-4px, 3px); }
      60% { transform: translate(4px, -3px); }
      70% { transform: translate(-2px, 1px); }
      80% { transform: translate(2px, -1px); }
      90% { transform: translate(-1px, 1px); }
    }

    .shaking {
      animation: screen-shake 0.5s ease-out;
    }

    .lightning-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9999;
      pointer-events: none;
      overflow: hidden;
    }

    .lightning-flash {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(
        180deg,
        rgba(255, 255, 255, 0.9) 0%,
        rgba(251, 191, 36, 0.6) 30%,
        rgba(249, 115, 22, 0.4) 60%,
        rgba(0, 0, 0, 0) 100%
      );
      animation: flash-sequence 1s ease-out forwards;
    }

    @keyframes flash-sequence {
      0% { opacity: 0; }
      5% { opacity: 1; }
      10% { opacity: 0.3; }
      15% { opacity: 0.9; }
      25% { opacity: 0.2; }
      30% { opacity: 0.8; }
      40% { opacity: 0.1; }
      50% { opacity: 0.6; }
      60% { opacity: 0; }
      100% { opacity: 0; }
    }

    .lightning-bolt {
      position: absolute;
      top: 0;
      left: 45%;
      width: 10%;
      height: 100%;
      z-index: 10;
    }

    .lightning-bolt--secondary {
      width: 8%;
      opacity: 0.7;
    }

    .lightning-path {
      stroke-linecap: round;
      stroke-linejoin: round;
    }

    .lightning-path--core {
      animation: lightning-core 1s ease-out forwards;
    }

    @keyframes lightning-core {
      0% { opacity: 0; stroke-width: 1; }
      10% { opacity: 1; stroke-width: 5; }
      30% { opacity: 1; stroke-width: 3; }
      50% { opacity: 0.8; stroke-width: 4; }
      70% { opacity: 0.6; stroke-width: 2; }
      100% { opacity: 0; stroke-width: 1; }
    }

    .lightning-impact {
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 200px;
      height: 200px;
      background: radial-gradient(
        circle,
        rgba(251, 191, 36, 0.8) 0%,
        rgba(249, 115, 22, 0.6) 30%,
        rgba(220, 38, 38, 0.4) 60%,
        transparent 100%
      );
      border-radius: 50%;
      animation: impact-expand 0.8s ease-out forwards;
    }

    @keyframes impact-expand {
      0% { width: 20px; height: 20px; opacity: 1; }
      50% { width: 300px; height: 300px; opacity: 0.8; }
      100% { width: 500px; height: 500px; opacity: 0; }
    }

    .lightning-overlay {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      z-index: 9998;
      background: linear-gradient(
        180deg,
        rgba(0, 0, 0, 0.7) 0%,
        rgba(15, 23, 42, 0.85) 50%,
        rgba(0, 0, 0, 0.7) 100%
      );
      backdrop-filter: blur(4px);
      animation: overlay-fade-in 0.5s ease-out forwards;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    @keyframes overlay-fade-in {
      0% { opacity: 0; }
      100% { opacity: 1; }
    }

    .lightning-text-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 1.5rem;
      padding: 3rem;
      animation: text-container-enter 0.6s ease-out forwards;
    }

    @keyframes text-container-enter {
      0% { opacity: 0; transform: scale(0.8) translateY(30px); }
      50% { transform: scale(1.05) translateY(-5px); }
      100% { opacity: 1; transform: scale(1) translateY(0); }
    }

    .lightning-emoji {
      font-size: 4rem;
    }

    .lightning-emoji-icon {
      display: inline-block;
      animation: emoji-spin-glow 2s ease-in-out infinite;
      filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.8));
    }

    @keyframes emoji-spin-glow {
      0%, 100% { transform: rotate(-5deg) scale(1); filter: drop-shadow(0 0 20px rgba(251, 191, 36, 0.8)); }
      25% { transform: rotate(5deg) scale(1.1); filter: drop-shadow(0 0 30px rgba(249, 115, 22, 1)); }
      50% { transform: rotate(-3deg) scale(1.05); filter: drop-shadow(0 0 25px rgba(251, 191, 36, 0.9)); }
      75% { transform: rotate(3deg) scale(1.08); filter: drop-shadow(0 0 28px rgba(249, 115, 22, 0.95)); }
    }

    .lightning-title {
      display: flex;
      flex-wrap: wrap;
      align-items: baseline;
      justify-content: center;
      gap: 0.5rem;
      font-size: 1.75rem;
      font-weight: 700;
      text-align: center;
      animation: title-glow 2s ease-in-out infinite;
    }

    .lightning-title-tw {
      background: linear-gradient(135deg, #fdba74, #f97316, #dc2626);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      font-size: 2rem;
      filter: drop-shadow(0 0 10px rgba(249, 115, 22, 0.6));
    }

    .lightning-title-en {
      color: #fed7aa;
      font-size: 1.25rem;
      font-weight: 400;
    }

    .lightning-title-suffix {
      color: #fdba74;
      font-size: 1.5rem;
    }

    @keyframes title-glow {
      0%, 100% { filter: drop-shadow(0 0 15px rgba(249, 115, 22, 0.5)); }
      50% { filter: drop-shadow(0 0 25px rgba(249, 115, 22, 0.8)); }
    }

    .lightning-reason {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 0.75rem;
      margin-top: 1rem;
    }

    .lightning-reason-line {
      font-size: 1.25rem;
      color: #fef3c7;
      text-align: center;
      opacity: 0;
      animation: reason-line-appear 0.8s ease-out forwards;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    }

    .lightning-reason-line:nth-child(1) { animation-delay: 0.3s; }
    .lightning-reason-line:nth-child(2) { animation-delay: 0.8s; }

    @keyframes reason-line-appear {
      0% { opacity: 0; transform: translateY(20px); }
      100% { opacity: 1; transform: translateY(0); }
    }

    .lightning-arrow {
      display: inline-block;
      margin: 0 0.5rem;
      color: #f97316;
      font-weight: bold;
      animation: arrow-pulse 1s ease-in-out infinite;
    }

    @keyframes arrow-pulse {
      0%, 100% { transform: translateX(0); opacity: 1; }
      50% { transform: translateX(5px); opacity: 0.7; }
    }

    .lightning-score-new {
      color: #4ade80;
      font-weight: 700;
      animation: score-new-pulse 1.5s ease-in-out infinite;
    }

    @keyframes score-new-pulse {
      0%, 100% { text-shadow: 0 0 10px rgba(74, 222, 128, 0.5); }
      50% { text-shadow: 0 0 20px rgba(74, 222, 128, 0.8), 0 0 30px rgba(74, 222, 128, 0.4); }
    }

    .lightning-score-badge {
      display: flex;
      align-items: baseline;
      gap: 0.5rem;
      margin-top: 1.5rem;
      padding: 1rem 2rem;
      background: linear-gradient(135deg, rgba(249, 115, 22, 0.3), rgba(220, 38, 38, 0.3));
      border: 2px solid rgba(251, 191, 36, 0.5);
      border-radius: 1rem;
      animation: badge-entrance 0.8s ease-out forwards, badge-pulse 2s ease-in-out 0.8s infinite;
    }

    @keyframes badge-entrance {
      0% { opacity: 0; transform: scale(0.5) rotate(-10deg); }
      60% { transform: scale(1.1) rotate(3deg); }
      100% { opacity: 1; transform: scale(1) rotate(0deg); }
    }

    @keyframes badge-pulse {
      0%, 100% { box-shadow: 0 0 20px rgba(251, 191, 36, 0.4), inset 0 0 20px rgba(251, 191, 36, 0.1); }
      50% { box-shadow: 0 0 40px rgba(251, 191, 36, 0.6), inset 0 0 30px rgba(251, 191, 36, 0.2); }
    }

    .lightning-score-plus {
      font-size: 3rem;
      font-weight: 800;
      background: linear-gradient(180deg, #fef3c7, #fbbf24, #f59e0b);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.3));
    }

    .lightning-score-label {
      font-size: 1.5rem;
      color: #fed7aa;
      font-weight: 600;
    }

    .hidden {
      display: none !important;
    }
  </style>
</head>
<body>
  <div id="main-content">
    <h1>Lightning Effect Test</h1>
    <button class="test-button" onclick="triggerLightning()">
      Trigger Ifrit Lightning Effect
    </button>
    <div class="info">
      <p>Click the button to see the dramatic lightning effect for Ifrit card.</p>
      <p style="margin-top: 1rem; opacity: 0.7;">Animation: ~7 seconds total</p>
    </div>
  </div>

  <!-- Lightning Container -->
  <div id="lightning-container" class="lightning-container hidden">
    <div class="lightning-flash"></div>
    <svg class="lightning-bolt" viewBox="0 0 100 100" preserveAspectRatio="none">
      <defs>
        <filter id="lightning-glow" x="-50%" y="-50%" width="200%" height="200%">
          <feGaussianBlur stdDeviation="3" result="blur"/>
          <feMerge>
            <feMergeNode in="blur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <linearGradient id="lightning-gradient" x1="0%" y1="0%" x2="0%" y2="100%">
          <stop offset="0%" stop-color="#fff7ed"/>
          <stop offset="30%" stop-color="#fdba74"/>
          <stop offset="60%" stop-color="#f97316"/>
          <stop offset="100%" stop-color="#dc2626"/>
        </linearGradient>
      </defs>
      <path d="M 50 0 L 35 20 L 50 25 L 30 50 L 55 45 L 25 80 L 60 60 L 40 100"
            class="lightning-path lightning-path--core"
            stroke="url(#lightning-gradient)"
            stroke-width="3"
            fill="none"
            filter="url(#lightning-glow)"/>
    </svg>
    <svg class="lightning-bolt lightning-bolt--secondary" viewBox="0 0 100 100" preserveAspectRatio="none" style="left: 30%">
      <path d="M 60 0 L 45 25 L 55 30 L 35 60 L 50 55 L 30 100"
            class="lightning-path"
            stroke="#fdba74"
            stroke-width="2"
            fill="none"
            filter="url(#lightning-glow)"/>
    </svg>
    <svg class="lightning-bolt lightning-bolt--secondary" viewBox="0 0 100 100" preserveAspectRatio="none" style="left: 65%">
      <path d="M 40 0 L 55 20 L 45 25 L 65 50 L 50 55 L 70 100"
            class="lightning-path"
            stroke="#fdba74"
            stroke-width="2"
            fill="none"
            filter="url(#lightning-glow)"/>
    </svg>
    <div class="lightning-impact"></div>
  </div>

  <!-- Overlay -->
  <div id="lightning-overlay" class="lightning-overlay hidden">
    <div class="lightning-text-container">
      <div class="lightning-emoji">
        <span class="lightning-emoji-icon">&#9889;</span>
      </div>
      <h2 class="lightning-title">
        <span class="lightning-title-tw">伊夫利特</span>
        <span class="lightning-title-en">(Ifrit)</span>
        <span class="lightning-title-suffix">&#12288;的閃電效果</span>
      </h2>
      <div class="lightning-reason">
        <p class="lightning-reason-line">場上有 3 張卡，立即加 3 分</p>
        <p class="lightning-reason-line">
          <span>原本 6 分</span>
          <span class="lightning-arrow">&#8594;</span>
          <span class="lightning-score-new">變成 9 分</span>
        </p>
      </div>
      <div class="lightning-score-badge">
        <span class="lightning-score-plus">+3</span>
        <span class="lightning-score-label">分</span>
      </div>
    </div>
  </div>

  <script>
    function triggerLightning() {
      const mainContent = document.getElementById('main-content');
      const lightningContainer = document.getElementById('lightning-container');
      const overlay = document.getElementById('lightning-overlay');

      // Phase 1: Lightning strike (0-1s)
      lightningContainer.classList.remove('hidden');
      mainContent.classList.add('shaking');

      // End lightning at 1s
      setTimeout(() => {
        lightningContainer.classList.add('hidden');
        mainContent.classList.remove('shaking');
      }, 1000);

      // Phase 2: Show overlay at 1s
      setTimeout(() => {
        overlay.classList.remove('hidden');
      }, 1000);

      // Phase 3: Complete at 7s
      setTimeout(() => {
        overlay.classList.add('hidden');
        // Reset animations by cloning
        const newContainer = lightningContainer.cloneNode(true);
        const newOverlay = overlay.cloneNode(true);
        lightningContainer.parentNode.replaceChild(newContainer, lightningContainer);
        overlay.parentNode.replaceChild(newOverlay, overlay);
      }, 7000);
    }
  </script>
</body>
</html>
