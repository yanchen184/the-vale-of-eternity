# F001 - Hestia (赫斯提亞)

> **卡片設計文件（SDD - Software Design Document）**
> 版本：1.0.0
> 設計者：Claude + User
> 設計日期：2025-01-01

---

## 📋 基本資訊

| 屬性 | 值 | 說明 |
|------|-----|------|
| **卡片 ID** | F001 | Fire 家族第一張卡 |
| **英文名稱** | Hestia | 希臘神話家與爐火女神 |
| **中文名稱** | 赫斯提亞 | 繁體中文名稱 |
| **元素** | FIRE | 火元素 |
| **費用 (Cost)** | 0 | 免費卡片 |
| **基礎分數** | 1 | 低分數，重視效果 |
| **稀有度** | Common | 常見卡片 |

---

## 🎴 卡片效果

### 主效果：增加石頭上限

**效果類型**：`EffectType.INCREASE_STONE_LIMIT`

**觸發時機**：`EffectTrigger.PERMANENT` (永久效果)

**效果數值**：+2

**效果描述**：
- **英文**：You can keep two more stones.
- **中文**：你的石頭持有上限增加 2。

---

## 🎯 設計理念

### 遊戲定位

- **類型**：資源型基礎卡片
- **時機**：開局必選卡，提供長期資源優勢
- **策略**：適合資源密集型策略，配合高費卡片

### 設計靈感

**神話背景**：
- Hestia 是希臘神話中的家與爐火女神
- 她代表家庭的穩定、溫暖和安全
- 在遊戲中，這轉化為「擴展資源容量」的能力

**機制設計**：
- Cost 0 確保玩家可以輕鬆取得
- 永久效果體現「穩固基礎」的概念
- +2 石頭上限（從 3 提升到 5）提供顯著優勢

### 平衡性考量

**為什麼 Cost 0？**
- 作為基礎建設卡，應該易於獲得
- 不提供即時分數優勢，需要長期配合

**為什麼 Base Score 只有 1？**
- 效果價值極高，需要低分數平衡
- 鼓勵玩家在效果和分數間取捨

**為什麼 +2 上限而不是 +1 或 +3？**
- +1 太弱，無法產生顯著影響
- +2 剛好讓上限從 3 提升到 5（66% 增加）
- +3 過強，會破壞遊戲平衡

**與同 Cost 卡片比較**：
- 其他 Cost 0 卡通常是 4-6 分純分數卡
- Hestia 犧牲分數換取資源優勢
- 適合不同策略取向

---

## ⚙️ 實作規格

### 資料結構

```typescript
{
  id: 'F001',
  name: 'Hestia',
  nameTw: '赫斯提亞',
  element: Element.FIRE,
  cost: 0,
  baseScore: 1,
  effects: [
    {
      type: EffectType.INCREASE_STONE_LIMIT,
      trigger: EffectTrigger.PERMANENT,
      value: 2,
      description: 'You can keep two more stones.',
      descriptionTw: '你的石頭持有上限增加 2。',
    },
  ],
  flavorText: 'Guardian of hearth and home.',
  flavorTextTw: '家與爐火的守護者，賜予你更多承載力量的空間。',
  imageUrl: '200px-Hestia.webp',
}
```

### 效果處理邏輯

#### 觸發時機

- [x] `ON_TAME` - 馴服時觸發 ❌ 不適用
- [x] `PERMANENT` - 永久生效 ✅ **使用此時機**
- [ ] `ON_SCORE` - 計分時觸發 ❌ 不適用

#### 處理流程

```
1. 檢查觸發條件
   - 卡片在玩家場上（field）
   - 效果類型為 INCREASE_STONE_LIMIT
   ↓
2. 計算效果數值
   - 從 effect.value 取得 +2
   ↓
3. 更新玩家狀態
   - player.stoneLimit += effect.value
   - 新上限 = 原上限 + 2
   ↓
4. 返回效果結果
   - success: true
   - message: "石頭上限增加 2"
```

#### 狀態變更

| 變更項目 | 變更方式 | 說明 |
|---------|---------|------|
| player.stoneLimit | +2 | 永久增加上限 |

### 邊界條件處理

| 情境 | 處理方式 |
|------|---------|
| 石頭上限已達 10 | 仍可增加，遊戲無絕對上限 |
| 多張 Hestia 疊加 | 效果累加（3 → 5 → 7 → ...） |
| 卡片被移除（如棄牌） | 效果失效，上限恢復 |
| 卡片在手牌 | 效果不生效 |

---

## 🧪 測試案例

### 單元測試

#### 1. 卡片資料完整性測試

- [x] ✅ 卡片 ID 正確為 'F001'
- [x] ✅ 英文名稱為 'Hestia'
- [x] ✅ 中文名稱為 '赫斯提亞'
- [x] ✅ 元素為 Element.FIRE
- [x] ✅ Cost 為 0
- [x] ✅ Base Score 為 1
- [x] ✅ 效果類型為 INCREASE_STONE_LIMIT
- [x] ✅ 觸發時機為 PERMANENT
- [x] ✅ 效果數值為 2

#### 2. 效果邏輯測試

**測試案例 1**：基本效果測試
```typescript
// Given: 玩家石頭上限為 3
// When: 馴服 Hestia 卡
// Then: 石頭上限變為 5
```

**測試案例 2**：多張疊加測試
```typescript
// Given: 玩家已有 1 張 Hestia（上限 5）
// When: 再馴服第 2 張 Hestia
// Then: 石頭上限變為 7
```

**測試案例 3**：效果移除測試
```typescript
// Given: 玩家有 1 張 Hestia（上限 5）
// When: Hestia 被棄牌
// Then: 石頭上限恢復為 3
```

### 整合測試

#### 1. 與遊戲系統整合

- [x] ✅ 能正確加入牌庫（建立牌庫時）
- [x] ✅ 能正確被抽取到市場
- [x] ✅ 能正確被拿取到手牌
- [x] ✅ 能正確被馴服到場上
- [x] ✅ 效果正確生效（上限增加）
- [x] ✅ 計分時正確計入 1 分

#### 2. 與其他卡片組合

**組合案例 1**：與高費卡組合
- **情境**：先馴服 Hestia，再馴服 Cost 4-6 的高費卡
- **預期**：有更多石頭空間儲存資源，易於召喚高費卡

**組合案例 2**：與石頭生產卡組合
- **情境**：Hestia + Salamander（持續產石頭）
- **預期**：可以儲存更多石頭，資源滾雪球

**組合案例 3**：與龍卡組合
- **情境**：Hestia + Dragon Egg（需要大量石頭）
- **預期**：更容易湊齊龍卡所需資源

### E2E 測試

- [x] ✅ 完整遊戲流程：市場 → 手牌 → 場上 → 效果生效 → 計分
- [x] ✅ 多回合持續性：效果在整場遊戲持續生效
- [x] ✅ 與 AI 對戰：AI 能正確評估 Hestia 的價值
- [x] ✅ 多人模式：每位玩家獨立計算上限

---

## 🎨 UI/UX 需求

### 卡片視覺設計

```
┌──────────────────┐
│   [Fire Icon]    │  ← 火元素圖示
│                  │
│     [Image]      │  ← Hestia 插圖
│    赫斯提亞       │
│                  │
│  Cost: 0  📊 1   │  ← 費用 & 分數
│                  │
│  ┌────────────┐  │
│  │ ⬆️ 石頭上限 │  │  ← 效果圖示
│  │    +2      │  │
│  └────────────┘  │
│                  │
│  家與爐火的守護  │  ← 風味文字
│  者，賜予更多   │
│  承載空間。     │
└──────────────────┘
```

### 視覺資源

| 資源 | 檔案名稱 | 尺寸 | 說明 |
|------|---------|------|------|
| 卡片圖片 | `200px-Hestia.webp` | 200x280 | 主要卡片圖 |
| 效果圖示 | `stone-limit.svg` | 32x32 | 石頭上限圖示 |
| 元素圖示 | `fire.svg` | 24x24 | 火元素圖示 |

### 互動設計

#### Hover 效果
- 顯示完整效果說明
- 高亮當前石頭上限數值
- 顯示「永久效果」標記

#### 點擊效果
- 選擇卡片時邊框高亮
- 播放選擇音效（火焰聲）
- 顯示可執行動作（拿取/馴服）

#### 特殊效果
- 馴服時：石頭上限數字閃爍動畫
- 場上時：卡片邊框微微發光（表示永久效果）

---

## 📊 平衡性數據

### 期望價值計算

```
總價值 = Base Score + 效果期望價值
       = 1 + (石頭上限價值)

石頭上限價值估算：
- 每回合平均可多儲存 1-2 顆石頭
- 10 回合遊戲 = 10-20 顆額外石頭儲存空間
- 轉化為卡片使用次數 ≈ 2-3 次額外高費卡召喚
- 估算價值 ≈ 8-12 分

總價值 ≈ 9-13 分

Cost/Value 比 = 0 / 10 = 0（無限好）
```

### 與同類卡片比較

| 卡片 | Cost | Score | 效果 | 總價值估算 | C/V 比 |
|------|------|-------|------|-----------|--------|
| Hestia | 0 | 1 | +2 石頭上限 | ~10 | 0 |
| [假設] Pure Score | 0 | 6 | 無 | 6 | 0 |
| [假設] Resource Card | 1 | 2 | 獲得 3 顆石頭 | ~5 | 0.2 |

### 使用率預測

- **預期使用率**：Very High (90%+)
- **適合策略**：
  - 資源密集型（高費卡）
  - 龍卡收集型
  - 中後期爆發型
- **反制策略**：
  - 快攻策略（不給時間利用資源優勢）
  - 純分數策略（直接累積 60 分）

---

## 📝 開發備註

### 已知問題
- 無

### 待討論事項
- 是否需要設定石頭上限的絕對上限（如 15）？
  - 目前設計為無上限
  - 如果 3 張 Hestia 疊加會變成 9，似乎仍可接受

### 未來優化方向
- 可考慮增加視覺動畫效果
- 多語言支援（日文、韓文等）

---

## 📚 相關資料

### 參考文件
- [卡片開發指南](../../../docs/cards/CARD_DEVELOPMENT_GUIDE.md)
- [效果系統文件](../../../docs/specs/GAME_ENGINE_SPEC.md)
- [卡片資料規格](../../../docs/specs/CARD_DATA_SPEC.md)

### 相關卡片
- Salamander (F005) - 石頭生產卡，與 Hestia 協同性強
- Dragon Egg (D001) - 高費卡，受益於 Hestia 的資源優勢

### 外部參考
- [Hestia - Wikipedia](https://en.wikipedia.org/wiki/Hestia)
- [希臘神話 - 赫斯提亞](https://zh.wikipedia.org/wiki/%E8%B5%AB%E6%96%AF%E6%8F%90%E4%BA%9E)

---

## 📋 開發檢查清單

### 設計階段
- [x] 設計理念明確
- [x] 效果規格清楚
- [x] 平衡性已評估
- [x] 測試案例已規劃

### 實作階段
- [ ] 卡片定義完成
- [ ] 效果實作完成
- [ ] 已註冊到系統
- [ ] 程式碼已審查

### 測試階段
- [ ] 單元測試通過
- [ ] 整合測試通過
- [ ] E2E 測試通過
- [ ] 覆蓋率達標 (>= 80%)

### 驗收階段
- [x] 文件完整
- [ ] 程式碼符合規範
- [ ] 測試全部通過
- [ ] 已進行程式碼審查
- [ ] 版本號已標記

---

## 📅 版本歷史

### v1.0.0 (2025-01-01)
- 初版設計
- 定義基本屬性
- 設計永久上限增加效果
- 平衡性分析完成

---

## 👤 設計者資訊

- **設計者**：Claude + User
- **審查者**：待定
- **批准者**：待定
- **設計日期**：2025-01-01
- **最後更新**：2025-01-01

---

> **Hestia 是遊戲中最基礎但最重要的卡片之一，為資源策略奠定基礎！**
