# å–®äººéŠæˆ² E2E æ¸¬è©¦æŒ‡å—

## ğŸ“‹ æ–‡ä»¶èªªæ˜

- **TEST_PROCEDURES.md** - è©³ç´°çš„æ¸¬è©¦æµç¨‹è¦ç¯„æ–‡ä»¶
- **chrome-devtools-tests.js** - å¯ç›´æ¥åœ¨ç€è¦½å™¨ Console åŸ·è¡Œçš„æ¸¬è©¦è…³æœ¬
- **README.md** - æœ¬æ–‡ä»¶ï¼Œå¿«é€Ÿä½¿ç”¨æŒ‡å—

---

## ğŸš€ å¿«é€Ÿé–‹å§‹

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨ Chrome DevTools Consoleï¼ˆæ¨è–¦ï¼‰

1. **å•Ÿå‹•é–‹ç™¼ä¼ºæœå™¨**
   ```bash
   npm run dev
   ```

2. **æ‰“é–‹ç€è¦½å™¨**
   - è¨ªå•ï¼š`http://localhost:5176/the-vale-of-eternity/`
   - é–‹å•Ÿ Chrome DevTools (F12)
   - åˆ‡æ›åˆ° Console åˆ†é 

3. **è¼‰å…¥æ¸¬è©¦è…³æœ¬**
   - è¤‡è£½ `chrome-devtools-tests.js` çš„å…¨éƒ¨å…§å®¹
   - è²¼ä¸Šåˆ° Console ä¸¦åŸ·è¡Œï¼ˆEnterï¼‰
   - çœ‹åˆ° "âœ¨ æ¸¬è©¦å·¥å…·å·²è¼‰å…¥" è¡¨ç¤ºæˆåŠŸ

4. **åŸ·è¡Œæ¸¬è©¦**
   ```javascript
   // åŸ·è¡Œæ‰€æœ‰æ¸¬è©¦
   runAllTests()

   // æˆ–åŸ·è¡Œå–®ä¸€æ¸¬è©¦
   test01_sanctuary()  // æ£²æ¯åœ°æ¸¬è©¦
   test02_discard()    // æ£„ç‰Œå †æ¸¬è©¦
   test03_returnToHand() // å ´ä¸Šå›æ‰‹æ¸¬è©¦
   ```

### æ–¹æ³•äºŒï¼šä½¿ç”¨ MCP Chrome DevTools

```bash
# ä½¿ç”¨ MCP å·¥å…·åŸ·è¡Œæ¸¬è©¦
mcp chrome-devtools execute-script --file tests/e2e/single-player/chrome-devtools-tests.js
```

---

## ğŸ“ æ¸¬è©¦ç”¨ä¾‹æ¸…å–®

| æ¸¬è©¦ç·¨è™Ÿ | æ¸¬è©¦åç¨± | æ¸¬è©¦ç›®æ¨™ | ç‹€æ…‹ |
|---------|---------|---------|------|
| TEST_01 | æ£²æ¯åœ°åŠŸèƒ½ | é©—è­‰å¾æ‰‹ç‰Œç§»å‹•å¡ç‰‡åˆ°æ£²æ¯åœ° | âœ… å®Œæˆ |
| TEST_02 | æ£„ç‰Œå †åŠŸèƒ½ | é©—è­‰å¾æ‰‹ç‰Œæ£„ç½®å¡ç‰‡åˆ°æ£„ç‰Œå † | âœ… å®Œæˆ |
| TEST_03 | å ´ä¸Šå›æ‰‹ | é©—è­‰å¾å ´ä¸Šå°‡å¡ç‰‡è¿”å›æ‰‹ç‰Œ | âœ… å®Œæˆ |
| TEST_04 | å¾æ£„ç‰Œå †æ‹¿ç‰Œ | é©—è­‰å¾æ£„ç‰Œå †æ‹¿ç‰Œå›æ‰‹ | ğŸš§ å¾…å¯¦ç¾ |
| TEST_05 | å€åŸŸæŒ‡ç¤ºç‰©åˆ‡æ› | é©—è­‰å€åŸŸæŒ‡ç¤ºç‰© 0â†’1â†’2â†’0 å¾ªç’° | ğŸš§ å¾…å¯¦ç¾ |
| TEST_06 | æŠ½ç‰ŒåŠŸèƒ½ | é©—è­‰å¾ç‰Œåº«æŠ½ç‰Œ | ğŸš§ å¾…å¯¦ç¾ |
| TEST_07 | å¬å–šå¡ç‰‡ | é©—è­‰å¾æ‰‹ç‰Œå¬å–šåˆ°å ´ä¸Š | ğŸš§ å¾…å¯¦ç¾ |
| TEST_08 | éŠæˆ²çµæŸè¨ˆåˆ† | é©—è­‰æ‰‹å‹•çµæŸéŠæˆ²ä¸¦è¨ˆç®—åˆ†æ•¸ | ğŸš§ å¾…å¯¦ç¾ |

---

## ğŸ¯ æ¸¬è©¦ç¯„ä¾‹è¼¸å‡º

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  å–®äººéŠæˆ² E2E æ¸¬è©¦å¥—ä»¶ v1.0.0       â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

=== TEST_01: æ£²æ¯åœ°åŠŸèƒ½æ¸¬è©¦ ===
[Step PROC] éŠæˆ²åˆå§‹åŒ–
âœ… éŠæˆ²åˆå§‹åŒ–å®Œæˆ
[Step PROC] é¸æ“‡ç¥å™¨
âœ… ç¥å™¨é¸æ“‡å®Œæˆ
[Step PROC] é¸æ“‡åˆå§‹å¡ç‰‡
âœ… åˆå§‹å¡ç‰‡é¸æ“‡å®Œæˆ
[Step 4] æ‰“é–‹æ‰‹ç‰Œé¢æ¿
âœ… æ‰‹ç‰Œé¢æ¿å·²æ‰“é–‹
[Step 5] è¨˜éŒ„ç¬¬ä¸€å¼µå¡ç‰‡
[Step 5] å¡ç‰‡åç¨±: æ£®æ—ç²¾éˆ
[Step 6] é»æ“Šæ‰‹ç‰Œ
[Step 7] æª¢æŸ¥æ£²æ¯åœ°æŒ‰éˆ•
[Step 8] é»æ“Šæ£²æ¯åœ°æŒ‰éˆ•
[Step 9] æª¢æŸ¥æ‰‹ç‰Œæ•¸é‡
[Step 10] æª¢æŸ¥æ£²æ¯åœ°å€åŸŸ
[Step 11] æ£²æ¯åœ°å¡ç‰‡æ•¸é‡: 1
âœ… TEST_01 PASSED - æ£²æ¯åœ°åŠŸèƒ½æ­£å¸¸

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  æ¸¬è©¦å ±å‘Š                              â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ç¸½æ¸¬è©¦æ•¸: 3
é€šé: 3
å¤±æ•—: 0
æˆåŠŸç‡: 100.0%
åŸ·è¡Œæ™‚é–“: 24.3s
```

---

## ğŸ› ï¸ æ¸¬è©¦å·¥å…·å‡½æ•¸

è…³æœ¬æä¾›äº†ä»¥ä¸‹å·¥å…·å‡½æ•¸ï¼š

### TestUtils

```javascript
// ç­‰å¾…å…ƒç´ å‡ºç¾
await TestUtils.waitForSelector('.card', 5000)

// ç­‰å¾…å¤šå€‹å…ƒç´ 
await TestUtils.waitForSelectorAll('.card', 6, 10000)

// é»æ“Šå…ƒç´ 
await TestUtils.click('button.submit')

// ç²å–æ–‡å­—
const text = await TestUtils.getText('.card-name')

// æª¢æŸ¥å…ƒç´ å­˜åœ¨
TestUtils.exists('.modal')

// è¨ˆæ•¸å…ƒç´ 
TestUtils.count('.card')

// å»¶é²
await TestUtils.sleep(1000)

// æ–·è¨€
TestUtils.assert(condition, 'éŒ¯èª¤è¨Šæ¯')

// æ—¥èªŒ
TestUtils.log(1, 'åŸ·è¡Œæ­¥é©Ÿ 1')
TestUtils.success('æ¸¬è©¦é€šé')
TestUtils.error('æ¸¬è©¦å¤±æ•—')
```

---

## ğŸ”§ è‡ªå®šç¾©æ¸¬è©¦

### ç¯„ä¾‹ï¼šæ–°å¢æ¸¬è©¦ç”¨ä¾‹

```javascript
async function test09_customTest() {
  console.log('\n=== TEST_09: è‡ªå®šç¾©æ¸¬è©¦ ===')

  try {
    // Step 1: åˆå§‹åŒ–
    await procInitGame()
    await procSelectArtifact()
    await procSelectInitialCards()

    // Step 2: ä½ çš„æ¸¬è©¦é‚è¼¯
    TestUtils.log(2, 'åŸ·è¡Œè‡ªå®šç¾©æ­¥é©Ÿ')
    // ...

    TestUtils.success('TEST_09 PASSED')
    return { status: 'PASS', testId: 'TEST_09' }

  } catch (error) {
    TestUtils.error(`TEST_09 FAILED: ${error.message}`)
    return { status: 'FAIL', testId: 'TEST_09', error: error.message }
  }
}
```

---

## ğŸ“Š æ¸¬è©¦å ±å‘Šæ ¼å¼

æ¯æ¬¡æ¸¬è©¦åŸ·è¡Œå¾Œæœƒè‡ªå‹•ç”Ÿæˆå ±å‘Šï¼š

```javascript
{
  status: 'PASS' | 'FAIL',
  testId: 'TEST_01',
  error: 'éŒ¯èª¤è¨Šæ¯'  // åƒ…åœ¨å¤±æ•—æ™‚å­˜åœ¨
}
```

---

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q1: æ¸¬è©¦è…³æœ¬è¼‰å…¥å¤±æ•—
**A:** ç¢ºä¿åœ¨æ­£ç¢ºçš„é é¢åŸ·è¡Œè…³æœ¬ï¼Œä¸¦ä¸”é–‹ç™¼ä¼ºæœå™¨æ­£åœ¨é‹è¡Œã€‚

### Q2: æ‰¾ä¸åˆ°å…ƒç´ 
**A:** æª¢æŸ¥å…ƒç´ é¸æ“‡å™¨æ˜¯å¦æ­£ç¢ºï¼Œæˆ–å¢åŠ ç­‰å¾…æ™‚é–“ï¼š
```javascript
await TestUtils.waitForSelector('.card', 10000) // ç­‰å¾… 10 ç§’
```

### Q3: æ¸¬è©¦åŸ·è¡Œéå¿«å°è‡´å¤±æ•—
**A:** åœ¨é—œéµæ­¥é©Ÿä¹‹é–“å¢åŠ å»¶é²ï¼š
```javascript
await TestUtils.sleep(1000) // å»¶é² 1 ç§’
```

### Q4: å¦‚ä½•èª¿è©¦æ¸¬è©¦
**A:** ä½¿ç”¨ Console çš„æ–·é»åŠŸèƒ½ï¼š
```javascript
debugger; // åœ¨æ­¤è™•æš«åœ
await TestUtils.click('.button')
```

---

## ğŸ“– åƒè€ƒè³‡æ–™

- [Chrome DevTools å®˜æ–¹æ–‡ä»¶](https://developer.chrome.com/docs/devtools/)
- [æ¸¬è©¦æµç¨‹è¦ç¯„](./TEST_PROCEDURES.md)
- [å°ˆæ¡ˆ README](../../../README.md)

---

## ğŸ”„ ç‰ˆæœ¬æ›´æ–°

- **v1.0.0** (2026-01-02)
  - åˆå§‹ç‰ˆæœ¬
  - å¯¦ç¾ TEST_01, TEST_02, TEST_03
  - æä¾›å®Œæ•´çš„æ¸¬è©¦å·¥å…·å‡½æ•¸åº«
