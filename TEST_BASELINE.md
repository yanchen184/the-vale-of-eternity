# 測試基準線 - 單人/多人統一遷移

**建立日期**: 2026-01-04
**測試者**: _________
**版本**: 遷移前基準線

---

## 📊 自動化測試結果

### 測試執行紀錄
```bash
# 執行時間: 2026-01-04
# 指令: npm test
# 結果檔案: test-baseline-before-migration.txt

待測試完成後填寫:
- [ ] 總測試數: ___
- [ ] 通過數: ___
- [ ] 失敗數: ___
- [ ] 跳過數: ___
```

---

## 🎮 單人模式手動測試檢查表

### A. 遊戲初始化
- [ ] **A1**: 遊戲載入正常，無錯誤
- [ ] **A2**: 顯示玩家名稱正確
- [ ] **A3**: 初始手牌數量正確（測試模式：包含 Imp F002）
- [ ] **A4**: 市場顯示 4 張卡片
- [ ] **A5**: 測試卡片正確出現（Ifrit F007 在市場）
- [ ] **A6**: 石頭池初始化為空

### B. 神器選擇階段（DRAW Phase - 擴展模式）
- [ ] **B1**: 顯示 3 個可選神器
- [ ] **B2**: 點擊神器可以選擇
- [ ] **B3**: 選中的神器有視覺標記
- [ ] **B4**: 確認按鈕正常運作
- [ ] **B5**: 確認後進入卡片選擇
- [ ] **B6**: 神器圖標顯示在左側欄

#### B.1 神器選擇測試（依序測試每個神器）
- [ ] **香爐 (Incense Burner)**
  - [ ] 選擇並確認成功
  - [ ] 神器圖標顯示

- [ ] **猴王金箍棒 (Monkey King Staff)**
  - [ ] 選擇並確認成功
  - [ ] 神器圖標顯示

- [ ] **吹笛人之笛 (Pied Piper's Pipe)**
  - [ ] 選擇並確認成功
  - [ ] 神器圖標顯示

- [ ] **七里靴 (Seven-League Boots)**
  - [ ] 選擇並確認成功
  - [ ] 自動翻開 2 張卡
  - [ ] 可以選擇 1 張放入棲息地

- [ ] **賢者之石 (Philosopher's Stone)**
  - [ ] 選擇並確認成功
  - [ ] 需要有棲息地卡片才能選

- [ ] **透特之書 (Book of Thoth)**
  - [ ] 選擇並確認成功
  - [ ] 石頭升級功能正常

### C. 卡片選擇階段（DRAW Phase - 神器確認後）
- [ ] **C1**: 可以從市場選擇 2 張卡片
- [ ] **C2**: 選中的卡片有視覺標記
- [ ] **C3**: 確認按鈕在選滿 2 張後啟用
- [ ] **C4**: 確認後卡片加入手牌
- [ ] **C5**: 階段轉換到 ACTION

### D. 行動階段（ACTION Phase）
- [ ] **D1**: 顯示當前回合數
- [ ] **D2**: 手牌正確顯示
- [ ] **D3**: 場上卡片正確顯示
- [ ] **D4**: 石頭池正確顯示

#### D.1 抽牌功能
- [ ] **D1.1**: 點擊牌堆圖標可抽牌
- [ ] **D1.2**: 抽到的卡片加入手牌
- [ ] **D1.3**: 牌堆數量減 1
- [ ] **D1.4**: 抽牌音效播放

#### D.2 馴服卡片
- [ ] **D2.1**: 從手牌馴服卡片（點擊卡片）
- [ ] **D2.2**: 卡片移動到場上
- [ ] **D2.3**: 支付正確的石頭費用
- [ ] **D2.4**: 馴服音效播放

#### D.3 當前回合卡片操作
- [ ] **D3.1**: 卡片顯示在「當前回合卡片區」
- [ ] **D3.2**: 「拿到手上」按鈕正常
- [ ] **D3.3**: 「賣掉」按鈕正常
- [ ] **D3.4**: 賣掉後獲得正確石頭數量

#### D.4 場上卡片操作
- [ ] **D4.1**: 回手按鈕正常（卡片回到手牌）
- [ ] **D4.2**: 棄置按鈕正常（卡片到棄置牌堆）

#### D.5 手牌操作
- [ ] **D5.1**: 點擊手牌展開詳細資訊
- [ ] **D5.2**: 召喚按鈕正常
- [ ] **D5.3**: 棄置按鈕正常
- [ ] **D5.4**: 移至棲息地按鈕正常（擴展模式）

#### D.6 石頭系統
- [ ] **D6.1**: 從銀行拿取石頭正常
- [ ] **D6.2**: 歸還石頭到銀行正常
- [ ] **D6.3**: 石頭上限為 4（或 6 如果有 Hestia）
- [ ] **D6.4**: 石頭音效正常

#### D.7 區域加成
- [ ] **D7.1**: 點擊區域加成按鈕切換 0→1→2→0
- [ ] **D7.2**: 場地欄位數量正確變化
- [ ] **D7.3**: 動作日誌記錄正確

### E. 閃電效果系統 ⚡（核心功能）

#### E.1 Ifrit (F007) - 分數閃電效果
- [ ] **E1.1**: 馴服 Ifrit 時觸發閃電動畫
- [ ] **E1.2**: 閃電動畫持續約 2-3 秒
- [ ] **E1.3**: 顯示效果原因：「場上有 X 張卡，伊夫利特獲得 +X 分加成！」
- [ ] **E1.4**: 動畫結束後自動打開分數彈窗
- [ ] **E1.5**: 分數彈窗顯示正確的分數增加
- [ ] **E1.6**: 分數軌道上的標記正確移動
- [ ] **E1.7**: `instantBonusScore` 正確增加
- [ ] **E1.8**: 關閉彈窗後回到遊戲
- [ ] **E1.9**: 音效正常播放

#### E.2 Imp (F002) - 石頭閃電效果
- [ ] **E2.1**: 馴服 Imp 時觸發閃電動畫
- [ ] **E2.2**: 閃電動畫持續約 2-3 秒
- [ ] **E2.3**: 顯示效果原因：「獲得 X 個 1 點石頭」
- [ ] **E2.4**: 動畫結束後**不打開**分數彈窗（因為是石頭效果）
- [ ] **E2.5**: 石頭池正確增加 2 個 ONE 石頭
- [ ] **E2.6**: 音效正常播放

### F. 神器效果執行（ACTION Phase）

#### F.1 香爐 (Incense Burner) - ACTION 類型
- [ ] **F1.1**: 神器面板顯示在右側
- [ ] **F1.2**: 點擊「使用神器」按鈕
- [ ] **F1.3**: 彈出選項視窗
- [ ] **F1.4**: 選項 1：購買市場卡片（花費 3 點石頭）
  - [ ] 顯示石頭支付選項
  - [ ] 選擇支付方式
  - [ ] 選擇要購買的卡片
  - [ ] 卡片加入場上
  - [ ] 石頭正確扣除
- [ ] **F1.5**: 選項 2：手牌棲息地（1 張手牌）
  - [ ] 選擇手牌
  - [ ] 卡片移至棲息地
- [ ] **F1.6**: 使用後神器標記為已使用
- [ ] **F1.7**: 結果訊息正確顯示

#### F.2 猴王金箍棒 (Monkey King Staff) - INSTANT 類型
- [ ] **F2.1**: 確認神器後立即觸發效果
- [ ] **F2.2**: 彈出卡片選擇視窗
- [ ] **F2.3**: 提示「選擇 2 張手牌棄置」
- [ ] **F2.4**: 選擇 2 張手牌
- [ ] **F2.5**: 確認後獲得 1 個紫石（6 分）
- [ ] **F2.6**: 手牌正確棄置
- [ ] **F2.7**: 神器標記為已使用

#### F.3 透特之書 (Book of Thoth) - ACTION 類型
- [ ] **F3.1**: 點擊使用神器
- [ ] **F3.2**: 彈出石頭升級視窗
- [ ] **F3.3**: 可選擇最多 2 次升級
- [ ] **F3.4**: 升級規則正確：
  - [ ] 1 點石 → 3 點石
  - [ ] 3 點石 → 6 點石
  - [ ] 元素石 → 6 點石
- [ ] **F3.5**: 確認後石頭正確變化
- [ ] **F3.6**: 神器標記為已使用

#### F.4 七里靴 (Seven-League Boots) - INSTANT 類型
- [ ] **F4.1**: 確認神器時自動翻開 2 張市場卡
- [ ] **F4.2**: 彈出卡片選擇視窗
- [ ] **F4.3**: 提示「選擇 1 張放入棲息地」
- [ ] **F4.4**: 選擇卡片並確認
- [ ] **F4.5**: 卡片移至棲息地
- [ ] **F4.6**: 另一張卡片回到牌堆或棄置
- [ ] **F4.7**: 神器標記為已使用

#### F.5 吹笛人之笛 (Pied Piper's Pipe) - INSTANT 類型
- [ ] **F5.1**: 確認神器後立即彈出選項
- [ ] **F5.2**: 選項 1：從牌堆抽 1 張卡
  - [ ] 確認後抽牌
  - [ ] 卡片加入手牌
- [ ] **F5.3**: 選項 2：召回棲息地所有卡
  - [ ] 確認後所有棲息地卡回手
  - [ ] 棲息地清空

#### F.6 賢者之石 (Philosopher's Stone) - INSTANT 類型
- [ ] **F6.1**: 需要棲息地有卡片才能選擇
- [ ] **F6.2**: 確認後彈出選項視窗
- [ ] **F6.3**: 可選擇 1 張棲息地卡回手
- [ ] **F6.4**: 可選擇 1 張棲息地卡棄置獲得 6 分石頭
- [ ] **F6.5**: 可同時選擇兩個動作
- [ ] **F6.6**: 確認後正確執行

### G. 結算階段（SCORE/RESOLUTION Phase）

#### G.1 結算效果卡片測試（以 Imp F002 為例）
- [ ] **G1.1**: 回合結束後進入結算階段
- [ ] **G1.2**: 有 RECOVER_CARD 效果的卡片高亮顯示
- [ ] **G1.3**: 點擊高亮卡片彈出確認視窗
- [ ] **G1.4**: 視窗顯示卡片資訊和效果說明
- [ ] **G1.5**: 「拿回手上」按鈕正常
- [ ] **G1.6**: 「保留在場」按鈕正常
- [ ] **G1.7**: 選擇拿回後卡片回到手牌
- [ ] **G1.8**: 選擇保留後卡片留在場上
- [ ] **G1.9**: 所有結算卡處理完才能結束回合
- [ ] **G1.10**: 頂部顯示「未處理結算卡片數」

#### G.2 結算完成
- [ ] **G2.1**: 所有結算卡處理完後「結束回合」按鈕啟用
- [ ] **G2.2**: 點擊結束回合正常
- [ ] **G2.3**: 回合數增加
- [ ] **G2.4**: 階段回到 DRAW（神器選擇）

### H. 分數系統

#### H.1 分數計算
- [ ] **H1.1**: 場上卡片基礎分正確
- [ ] **H1.2**: 即時加成分（Ifrit）正確
- [ ] **H1.3**: 分數軌道顯示正確
- [ ] **H1.4**: 點擊分數可手動調整

#### H.2 分數歷史（單人獨有功能）
- [ ] **H2.1**: 點擊「查看分數」按鈕
- [ ] **H2.2**: 切換到「分數變化記錄」分頁
- [ ] **H2.3**: 顯示所有分數變化記錄
- [ ] **H2.4**: 記錄包含：時間、動作、分數變化、原因
- [ ] **H2.5**: 記錄按時間排序

#### H.3 翻面機制
- [ ] **H3.1**: 點擊玩家標記可翻面
- [ ] **H3.2**: 翻面後分數 +60
- [ ] **H3.3**: 再次翻面分數 -60
- [ ] **H3.4**: 視覺狀態正確變化

### I. 棲息地系統（擴展模式）
- [ ] **I1**: 手牌可移至棲息地
- [ ] **I2**: 棲息地卡片正確顯示
- [ ] **I3**: 棲息地卡片可回到手牌（在 ACTION 階段）
- [ ] **I4**: 棲息地數量正確統計
- [ ] **I5**: 查看棲息地彈窗正常

### J. 遊戲結束
- [ ] **J1**: 達到結束條件（回合數或分數）
- [ ] **J2**: 顯示遊戲結束彈窗
- [ ] **J3**: 顯示最終分數
- [ ] **J4**: 顯示回合數
- [ ] **J5**: 「再玩一次」按鈕正常
- [ ] **J6**: 「返回選單」按鈕正常

### K. UI/UX 測試
- [ ] **K1**: 所有按鈕都有 hover 效果
- [ ] **K2**: 所有彈窗可以關閉
- [ ] **K3**: 錯誤訊息正確顯示（Toast）
- [ ] **K4**: 載入動畫正常
- [ ] **K5**: 響應式佈局正常（不同視窗大小）
- [ ] **K6**: 無明顯卡頓或延遲

### L. 音效系統
- [ ] **L1**: 抽牌音效
- [ ] **L2**: 馴服音效
- [ ] **L3**: 賣卡音效
- [ ] **L4**: 石頭音效（拿取/歸還）
- [ ] **L5**: 棲息地音效（移入/移出）
- [ ] **L6**: 階段轉換音效
- [ ] **L7**: 神器選擇音效
- [ ] **L8**: 遊戲結束音效

---

## 🎮 多人模式手動測試檢查表

### M. 房間系統
- [ ] **M1**: 創建房間正常
- [ ] **M2**: 顯示房間代碼
- [ ] **M3**: 其他玩家可加入（測試 2-4 人）
- [ ] **M4**: 玩家列表正確顯示
- [ ] **M5**: 玩家顏色正確分配
- [ ] **M6**: 房主標記正確

### N. 等待室
- [ ] **N1**: 顯示當前玩家數 / 最大玩家數
- [ ] **N2**: 房主可以開始遊戲（>=2 人時）
- [ ] **N3**: 非房主看到「等待房主開始」提示
- [ ] **N4**: 離開按鈕正常

### O. 神器選擇（多人）
- [ ] **O1**: 按順序輪流選擇神器
- [ ] **O2**: 顯示「輪到誰選神器」提示
- [ ] **O3**: 其他玩家選擇的神器有標記
- [ ] **O4**: 確認後進入卡片選擇

### P. 卡片選擇（多人）
- [ ] **P1**: 按順序輪流選擇卡片
- [ ] **P2**: 顯示「輪到誰選卡」提示
- [ ] **P3**: 其他玩家選擇的卡片有標記
- [ ] **P4**: 選滿後自動進入 ACTION 階段

### Q. 回合制系統
- [ ] **Q1**: 顯示當前回合玩家
- [ ] **Q2**: 輪到自己時有明顯提示
- [ ] **Q3**: 輪到自己時播放音效
- [ ] **Q4**: 其他玩家動作時有視覺/音效反饋
- [ ] **Q5**: Pass 按鈕正常
- [ ] **Q6**: 所有人 Pass 後進入下一階段

### R. 即時同步
- [ ] **R1**: 玩家 A 抽牌，玩家 B 看到手牌數增加
- [ ] **R2**: 玩家 A 馴服卡片，玩家 B 看到場上卡片
- [ ] **R3**: 玩家 A 拿石頭，玩家 B 看到石頭池變化
- [ ] **R4**: 分數變化即時同步
- [ ] **R5**: 無明顯延遲（< 1 秒）

### S. 動作日誌
- [ ] **S1**: 顯示在左下角
- [ ] **S2**: 記錄所有玩家動作
- [ ] **S3**: 玩家名稱用顏色標記
- [ ] **S4**: 最新動作在最上方
- [ ] **S5**: 自動滾動

### T. 其他玩家音效同步（重要！）
- [ ] **T1**: 其他玩家抽牌時聽到音效
- [ ] **T2**: 其他玩家馴服卡片時聽到音效
- [ ] **T3**: 其他玩家賣卡時聽到音效
- [ ] **T4**: 其他玩家拿/還石頭時聽到音效
- [ ] **T5**: 階段轉換音效所有人都聽到

### U. 多人結算階段
- [ ] **U1**: 按順序處理結算效果
- [ ] **U2**: 顯示誰在處理結算
- [ ] **U3**: 其他玩家等待
- [ ] **U4**: 所有人處理完才進入下回合

### V. 遊戲結束（多人）
- [ ] **V1**: 顯示所有玩家最終分數
- [ ] **V2**: 排名正確（第 1-4 名）
- [ ] **V3**: 勝利者有金色標記
- [ ] **V4**: 如果是自己勝利，播放勝利音效
- [ ] **V5**: 返回大廳按鈕正常

---

## 📈 效能基準測試

### 單人模式效能
```
測試環境:
- 瀏覽器: Chrome/Firefox/Safari
- 裝置: Desktop/Mobile

記錄以下數據:
- [ ] 遊戲載入時間: ___ 秒
- [ ] 抽牌反應時間: ___ 毫秒
- [ ] 馳服卡片反應時間: ___ 毫秒
- [ ] 階段轉換時間: ___ 毫秒
- [ ] 記憶體使用量: ___ MB
- [ ] CPU 使用率: ___ %
```

### 多人模式效能
```
測試環境:
- 玩家數量: 2/3/4 人
- 網路延遲: ___ ms

記錄以下數據:
- [ ] 房間創建時間: ___ 秒
- [ ] 玩家加入延遲: ___ 毫秒
- [ ] 動作同步延遲: ___ 毫秒
- [ ] Firebase 讀取延遲: ___ 毫秒
- [ ] Firebase 寫入延遲: ___ 毫秒
```

---

## 🐛 已知問題記錄

### 問題清單
```
記錄所有在測試中發現的問題：

1. [嚴重/一般/輕微] 問題描述
   - 重現步驟:
   - 預期行為:
   - 實際行為:
   - 截圖/錯誤訊息:

2. ...
```

---

## ✅ 測試完成確認

### 簽名
- **測試者**: _________
- **日期**: _________
- **總測試時間**: ___ 小時

### 總結
- 單人模式通過率: ___% (通過項目 / 總項目)
- 多人模式通過率: ___% (通過項目 / 總項目)
- 效能評估: 優秀/良好/需改進/不合格
- 整體評估: 可開始遷移 / 需先修復問題

### 備註
```
其他重要發現或建議:


```

---

## 📋 下一步行動

- [ ] 將此基準線結果存檔
- [ ] 修復發現的嚴重問題
- [ ] 開始階段 1：擴展多人模式
- [ ] 遷移後重新測試並對比
